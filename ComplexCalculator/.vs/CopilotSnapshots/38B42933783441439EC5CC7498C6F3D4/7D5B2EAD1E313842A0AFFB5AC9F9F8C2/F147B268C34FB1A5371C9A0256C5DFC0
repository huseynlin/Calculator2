using System.Globalization;
using System.Windows.Forms;

namespace ComplexCalculator
{
    public partial class Form1 : Form
    {
        private char operation;
        private double amount, h, k;
        private bool click;

        public Form1()
        {
            InitializeComponent();
        }

        private void beraber_Click(object sender, EventArgs e)
        {
            double a1 = double.Parse(richTextBox1.Text, CultureInfo.InvariantCulture);
            if (richTextBox1.Text == string.Empty || richTextBox1.Text == "0")
            {
                richTextBox1.Text = "Invalid value";
            }
            else
            {
                switch (operation)
                {
                    case '+':
                        h = amount + a1;
                        break;
                    case '-':
                        h = amount - a1;
                        break;
                    case 'x':
                        h = amount * a1;
                        break;
                    case '/':
                        h = amount / a1;
                        break;
                    case 'c':
                        h = 1 / amount;
                        break;
                }
                richTextBox1.Text = h.ToString();
                // İşlemden sonra amount ve operation sıfırlanıyor
                amount = 0;
                operation = '\0';
            }
        }

        private void ce_Click(object sender, EventArgs e)
        {
            richTextBox1.Text = "0";
            click = false;
        }

        private void c_Click(object sender, EventArgs e)
        {
            richTextBox1.Text = "0";
        }

        private void sqrt_Click(object sender, EventArgs e)
        {
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            k = double.Parse(richTextBox1.Text, CultureInfo.InvariantCulture);
            richTextBox1.Text += "\nSqrt(" + k + ")" + "=" + Math.Sqrt(k);
        }

        private void r1_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }

            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "1";
        }

        private void r2_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "2";
        }

        private void r3_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "3";
        }

        private void r4_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "4";
        }

        private void r5_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "5";
        }

        private void r6_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "6";
        }

        private void r7_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "7";
        }

        private void r8_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "8";
        }

        private void r9_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "9";
        }

        private void r0_Click(object sender, EventArgs e)
        {
            if (click)
            {
                richTextBox1.Text = "";
                click = false;
            }
            if (richTextBox1.Text == "0")
                richTextBox1.Text = "";
            richTextBox1.Text += "0";
        }

        private void nokta_Click(object sender, EventArgs e)
        {
            if (!richTextBox1.Text.Contains("."))
            {
                richTextBox1.Text += ".";

            }
        }

        private void faiz_Click(object sender, EventArgs e)
        {
            // richTextBox1.Text formatı: "ana_para;faiz_orani" örn: "200;10"
            var parts = richTextBox1.Text.Split(';');
            if (parts.Length == 2 && double.TryParse(parts[0], NumberStyles.Any, CultureInfo.InvariantCulture, out double ana_para)
                && double.TryParse(parts[1], NumberStyles.Any, CultureInfo.InvariantCulture, out double faiz_orani))
            {
                double faiz = ana_para * faiz_orani / 100;
                richTextBox1.Text = faiz.ToString();
            }
            else
            {
                richTextBox1.Text = "Geçersiz format (örn: 200;10)";
            }
        }

        private void cem_Click(object sender, EventArgs e)
        {
            if (richTextBox1.Text == string.Empty)
            {
                richTextBox1.Text = "Invalid value";
            }
            else
            {
                operation = '+';
                click = true;
                amount = double.Parse(richTextBox1.Text, CultureInfo.InvariantCulture);
            }
        }

        private void ferq_Click(object sender, EventArgs e)
        {
            if (richTextBox1.Text == string.Empty)
            {
                richTextBox1.Text = "Invalid value";
            }
            else
            {
                operation = '-';
                click = true;
                amount = double.Parse(richTextBox1.Text, CultureInfo.InvariantCulture);
            }
        }

        private void hasil_Click(object sender, EventArgs e)
        {
            if (richTextBox1.Text == string.Empty)
            {
                richTextBox1.Text = "Invalid value";
            }
            else
            {
                operation = 'x';
                click = true;
                amount = double.Parse(richTextBox1.Text, CultureInfo.InvariantCulture);
            }
        }

        private void nisbet_Click(object sender, EventArgs e)
        {
            if (richTextBox1.Text == string.Empty)
            {
                richTextBox1.Text = "Invalid value";
            }
            else
            {
                operation = '/';
                click = true;
                amount = double.Parse(richTextBox1.Text, CultureInfo.InvariantCulture);
            }
        }


    }
}
